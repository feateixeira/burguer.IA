# üîß Solu√ß√£o para Erro 404 - Edge Function n√£o encontrada

## ‚ö†Ô∏è Erro Atual
```
POST https://tndiwjznitnualtorbpk.supabase.co/functions/v1/create-user 404 (Not Found)
```

Isso significa que a Edge Function `create-user` **n√£o est√° deployada** ou **n√£o existe** no Supabase.

## ‚úÖ Solu√ß√£o: Criar/Deployar a Edge Function

### Op√ß√£o 1: Verificar se a Fun√ß√£o Existe

1. **Acesse o Supabase Dashboard:**
   - V√° para https://supabase.com/dashboard
   - Selecione seu projeto
   - No menu lateral, clique em **Edge Functions**

2. **Verifique se `create-user` existe:**
   - Procure por `create-user` na lista
   - Se **N√ÉO encontrar**, voc√™ precisa criar
   - Se encontrar, precisa fazer **Redeploy**

### Op√ß√£o 2: Criar Nova Edge Function (Se n√£o existir)

1. **No Dashboard ‚Üí Edge Functions:**
   - Clique em **"New Function"** ou **"Create Function"**
   - Nome: `create-user` (exatamente assim, com h√≠fen)
   - N√£o use: `create_user` ou `createUser`

2. **Cole o c√≥digo:**
   - Abra o arquivo `supabase/functions/create-user/index.ts`
   - **COPIE TODO O C√ìDIGO**
   - Cole na interface do Supabase (substitua qualquer c√≥digo padr√£o)
   - Clique em **"Deploy"** ou **"Save and Deploy"**

3. **Configure os Secrets:**
   - Ap√≥s deploy, v√° em **Settings** ou **Secrets**
   - Adicione o secret:
     - **Key**: `SERVICE_ROLE_KEY`
     - **Value**: `eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6InRuZGl3anpuaXRudWFsdG9yYnBrIiwicm9sZSI6InNlcnZpY2Vfcm9sZSIsImlhdCI6MTc2MTY3NTI3NSwiZXhwIjoyMDc3MjUxMjc1fQ.OqXrm_90XLULLN1m7-vVjrWA_yMo2cCCAxwNd6j2DVQ`

4. **Fa√ßa Redeploy:**
   - Ap√≥s adicionar o secret, clique em **"Redeploy"** ou **"Deploy"** novamente

### Op√ß√£o 3: Redeployar (Se a fun√ß√£o j√° existe)

1. **No Dashboard ‚Üí Edge Functions ‚Üí `create-user`:**
   - Clique em **"Edit"** ou **"Code"**
   - Verifique se o c√≥digo est√° atualizado (deve ter os logs de debug que adicionamos)
   - Se n√£o estiver, cole o c√≥digo do arquivo `supabase/functions/create-user/index.ts`
   - Clique em **"Deploy"** ou **"Redeploy"**

2. **Verifique os Secrets:**
   - V√° em **Settings** ‚Üí **Secrets**
   - Certifique-se de que `SERVICE_ROLE_KEY` est√° configurada
   - Se n√£o estiver, adicione conforme Op√ß√£o 2, passo 3

### Op√ß√£o 4: Deploy via CLI (Recomendado)

Se voc√™ tem o Supabase CLI instalado:

```bash
# Certifique-se de estar na pasta do projeto
cd "c:\Users\Felli\OneDrive\Documentos\PROJETO ULTRA SECRETO\burgueria-saas-main"

# Fazer login (se necess√°rio)
supabase login

# Fazer link do projeto
supabase link --project-ref tndiwjznitnualtorbpk

# Deploy da fun√ß√£o espec√≠fica
supabase functions deploy create-user
```

Ap√≥s o deploy via CLI, voc√™ ainda precisa adicionar o secret no Dashboard:
- Edge Functions ‚Üí `create-user` ‚Üí Settings ‚Üí Secrets
- Adicione `SERVICE_ROLE_KEY` com o valor da service_role key

## üîç Verificar se Funcionou

Ap√≥s fazer o deploy:

1. **Verifique o status:**
   - A fun√ß√£o deve aparecer como **"Active"** ou **"Deployed"**
   - N√£o deve ter erros de sintaxe

2. **Teste:**
   - Tente criar um usu√°rio no Admin Panel
   - Se funcionar: ‚úÖ Pronto!
   - Se ainda der 404: Verifique o nome da fun√ß√£o (deve ser `create-user` exatamente)

3. **Verifique os logs:**
   - Edge Functions ‚Üí `create-user` ‚Üí **Logs**
   - Tente criar um usu√°rio
   - Deve aparecer logs recentes

## ‚ö†Ô∏è Notas Importantes

- O nome da fun√ß√£o √© **case-sensitive** e **sensitive a h√≠fens/underscores**
- Deve ser exatamente: `create-user` (com h√≠fen, min√∫sculas)
- N√ÉO pode ser: `create_user`, `CreateUser`, `createUser`, etc.
- Ap√≥s criar/deployar, pode levar alguns segundos para estar ativa
- Sempre adicione o secret `SERVICE_ROLE_KEY` ap√≥s criar a fun√ß√£o

